---
title: "RelatÃ³rio - MATEMÃTICA ATUARIAL"
author: "Autor: JoÃ£o Guilherme Pereira dos Santos"
date: "17 de maio, 2023"
output:
    html_document:
       highlight: textmate
       includes:
         in_header: "../header/cabecalho.html"
       theme: flatly
       number_sections: no
       toc: yes
       toc_depth: 4
       toc_float:
         collapsed: yes
         smooth_scroll: yes
       code_folding: show
---

<br> <br>

<head><link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@400;700&family=Montserrat:wght@100;400;900&family=Reenie+Beanie&family=Ubuntu:wght@300&display=swap" rel="stylesheet"> <link rel="stylesheet" href="../css/styles.css"></head>

------------------------------------------------------------------------

<div id="hello" class="greeting message" style="color: red;">
  Hello <strong>world</strong>!
</div>

# **ApresentaÃ§Ã£o**

<p class="justify">

Â  Â  Â  Â  Â  Â  Â  A matemÃ¡tica atuarial Ã© um campo interdisciplinar que combina conceitos de matemÃ¡tica, probabilidade e estatÃ­stica para analisar e gerenciar riscos financeiros. Ela Ã© aplicada em diversas Ã¡reas, como seguros, previdÃªncia, investimentos e finanÃ§as corporativas, ajudando a avaliar a probabilidade de eventos futuros e seus impactos financeiros. Os atuÃ¡rios utilizam modelos matemÃ¡ticos para prever a probabilidade de eventos como morte, invalidez ou morbidez, e calcular o valor esperado de pagamentos ou recebimentos futuros. A precisÃ£o desses cÃ¡lculos pode ter um grande impacto nos resultados financeiros das empresas e indivÃ­duos envolvidos. <br> Â  Â  Â  Â  Â  O presente trabalho visa explorar as principais tÃ©cnicas e conceitos da matemÃ¡tica atuarial, com foco nos cÃ¡lculos de seguros e anuidades em suas formas discretas e contÃ­nuas. SerÃ£o utilizados tanto o pacote lifecontingencies para o software R quanto fÃ³rmulas manuais para realizar os cÃ¡lculos necessÃ¡rios. O relatÃ³rio apresenta uma anÃ¡lise detalhada das principais fÃ³rmulas e conceitos utilizados na matemÃ¡tica atuarial, com exemplos prÃ¡ticos que ilustram sua aplicaÃ§Ã£o.

Â  Â  Â  Â  Â  Ã‰ importante enfatizar que ass tÃ¡buas de mortalidades sÃ£o ferramentas essenciais no campo dos seguros, pois fornece informaÃ§Ãµes valiosas sobre a probabilidade de morte em diferentes idades. Ela Ã© uma tabela estatÃ­stica que descreve a taxa de mortalidade em uma determinada populaÃ§Ã£o, levando em consideraÃ§Ã£o fatores como idade, sexo e outros atributos relevantes.

O grÃ¡fico abaixo mostra o comportamento que as diferentes tÃ¡buas de mortalidade podem apresentar:

```{r Pacotes para personalizar o markdown first, include=FALSE}
library(knitr)
# kable(PhillipsDados)
library(dplyr)
library(car)
library(rstatix)
library(emmeans)
library(ggplot2)
library(kableExtra)
library(htmltools)
library(equatiomatic)
library(gganimate)
library(av)
```

```{r GrÃ¡fico animado, echo=FALSE, warning=FALSE}
# GRAFICO PIBR POR GOVERNO ANIMADO 2
dados_tabuas = read.delim('../base_de_dados/banco_de_tabuas.txt',dec = ',', header = T)
# graficopibr<-ggplot(data=dados_tabuas)+
#   geom_line(size=1.2, aes(x= x, y=BR.EMSmt.v.2015.m, color = "#23dedb", name= "BR.EMSmt.v.2015.m"), alpha = 0.5)+
#   geom_line(size=1.2, aes(x= x, y=BR.EMSmt.v.2015.f, color = "#ff6bb0", name= "BR.EMSmt.v.2015.f"), alpha = 0.5)+
#   geom_line(size=1.2, aes(x= x, y=AMERICAN.EXPERIENCE, color = "#fffb00", name= "AMERICAN EXPERIENCE"), alpha = 0.5)+
#   labs(title = "COMPARATIVO TÃBUAS DE MORTALIDADE", x= "Idade em anos",y="qx")+
#   theme_minimal()+
#   theme(axis.title.x= element_text(size=13),
#         axis.title.y=element_text(size=13),
#         axis.text.x=element_text(size=12),
#         axis.text.y = element_text(size=12),
#         plot.title = element_text(size=16, hjust = 0.5),
#         legend.text = element_text(size=12))+
#   transition_reveal(x)+
#   scale_color_manual(values = c("#23dedb", "#ff6bb0", "#fffb00"), name = "",
#                      labels = c("BR.EMSmt.v.2015.m", "BR.EMSmt.v.2015.f", "AMERICAN EXPERIENCE")) +
#   view_follow(fixed_y= TRUE)
# animate(graficopibr, nframes=144, fps=18, width = 900, height=500, end_pause = 70)
```

Ao calcular os prÃªmios e benefÃ­cios dos seguros, as seguradoras utilizam a tÃ¡bua de mortalidade como base para estimar as probabilidades de ocorrÃªncia de eventos, e no presente relatÃ³rio nÃ£o foi diferente, para os cÃ¡lculos dos seguros e anuidades utilizei como ponto de partida a probabilidade de morte *(qx)* da tÃ¡bua *BR.EMSsb.v.2015.m* que pode ser encontrada no [Banco de tÃ¡buas do IBA](https://atuarios.org.br/tabuas-biometricas/).

</p>

```{r site}
knitr::include_url("https://atuarios.org.br/tabuas-biometricas/")
```

<hr class="dotted">

Limpando o console:

```{r Limpando o Console}
rm(list = ls())
```

Retirando a notaÃ§Ã£o ciÃªntÃ­fica:

```{r Retirando a notaÃ§Ã£o cientÃ­fica}
options(scipen = 9999)
options(max.print = 100000)
```

Carreganto os pacotes necessÃ¡rios:

```{r Pacotes utilizados, warning = FALSE, message = FALSE}
if (!require("lifecontingencies")) {
  install.packages("lifecontingencies")
  library("lifecontingencies")
}
```

Base de dados:

```{r Gerando a base de dados, warning=FALSE, message=FALSE}
dados <- read.table("../base_de_dados/bremsmt2015f.txt", header = TRUE)
tv_dados <- probs2lifetable(dados$qx, type = "qx", radix = 10000, name = "bremsmt2015f")
tc_dados <- new("actuarialtable", x = tv_dados@x, lx = tv_dados@lx, name = "TÃ¡bua de comutaÃ§ao bremsmt2015f", interest = 0.06)
dados_tabuas = read.delim('../base_de_dados/banco_de_tabuas.txt',dec = ',', header = T)
```

```{r Pacotes para personalizar o markdown, include=FALSE}
library(knitr)
# kable(PhillipsDados)
library(dplyr)
library(car)
library(rstatix)
library(emmeans)
library(ggplot2)
library(kableExtra)
library(htmltools)
library(equatiomatic)
library(gganimate)
```

VisualizaÃ§Ã£o da base de dados: <br>

```{r class.source="watch-out"}
library(rmarkdown)
tv_dados
#paged_table(as.data.frame(tv_dados))
```

```{r DefiniÃ§Ã£o de valores, include=FALSE}
w <- which.max(dados$qx) - 1
w
i <- 0.04
v <- 1 / (1 + i)
x <- 40
m <- 30
n <- 20
d <- log(1 + i)
```

```{r ConstruÃ§Ã£o das tÃ¡buas utilizando o pacote lifecontigencies, warning=FALSE, message=FALSE}
# ConstruÃ§Ã£o da tÃ¡bua de vida
tv <- probs2lifetable(dados$qx, type = "qx", radix = 1000, name = "TÃ¡bua de vida BR-EMS-mt 2015 feminina")

# ConstruÃ§Ã£o da tÃ¡bua de comutaÃ§Ã£o
tc <- new("actuarialtable", x = tv@x, lx = tv@lx, name = "TÃ¡bua de comutaÃ§Ã£o BR-EMS-mt 2015 feminina", interest = 0.04)

# CÃ¡lculo de seguros
l <- tv@lx
```

<br> <br>

# Leis de mortalidade

<p class="justify">

Leis de mortalidade sÃ£o expressÃµes matemÃ¡ticas que descrevem a mortalidade em funÃ§Ã£o da idade e um conjunto de parÃ¢metros. Essas leis nÃ£o sÃ£o somente usada na atuÃ¡ria, mas tambÃ©m nas Ã¡reas de demografia (projeÃ§Ãµes de populaÃ§Ã£o) e saÃºde. Alguns dos modelos conhecidos sÃ£o: Makeham, Gompertz, Thiele, Perks, Heligman-Pollard. E vocÃª pode se perguntar qual a finalidade dessas leis, na prÃ¡tica. Bom elas servem principalmente para criaÃ§Ã£o de tÃ¡buas de vida especÃ­ficas para uma massa. PS: No caso de criaÃ§Ã£o de tÃ¡buas de vÃ­da, o modelo mais utilizado Ã© o de Heligman-Pollard.

</p>

+------------------+------------------------------+---------------------------+--------------------------------+-------------------------------+
| DistribuiÃ§Ã£o     | \\(l_x\\)                    | Î¼(x)                      | s(x)                           | RestriÃ§Ãµes                    |
+==================+==============================+===========================+================================+===============================+
| De Moivre (1729) | \\(k \\cdot (\\omega - x)\\) | \\((\\omega - x)\^{-1}\\) | \\(1 - \\frac{x}{\\omega}\\)   | 0 â‰¤ x \< Ï‰                    |
+------------------+------------------------------+---------------------------+--------------------------------+-------------------------------+
| Gompertz (1825)  | xxx                          | \\(Bc\^x\\)               | \\(\\exp[-m(c\^x - 1)]\\)      | B \> 0, c \> 1, x â‰¥ 0         |
+------------------+------------------------------+---------------------------+--------------------------------+-------------------------------+
| Makeham (1860)   | xxx                          | \\(A + Bc\^x\\)           | \\(\\exp[-Ax - m(c\^x - 1)]\\) | B \> 0, A â‰¥ -B, c \> 1, x â‰¥ 0 |
+------------------+------------------------------+---------------------------+--------------------------------+-------------------------------+
| Weibull (1939)   | xxx                          | \\(kx\^n\\)               | \\(\\exp(-ux\^{n+1})\\)        | k \> 0, n \> 0, x â‰¥ 0         |
+------------------+------------------------------+---------------------------+--------------------------------+-------------------------------+
| Thiele           | xxx1                         | xxx                       | xxx3                           | xxx                           |
+------------------+------------------------------+---------------------------+--------------------------------+-------------------------------+
| Heligman-Pollard | xxx                          | xxx2                      | xxx                            | xxx                           |
+------------------+------------------------------+---------------------------+--------------------------------+-------------------------------+

# 1. Seguros individuais e discretos

FormulaÃ§Ã£o geral: $$ \boxed{A = \sum {v^{t+1} \cdot _{t\scriptsize{|}}q_x}} \\ _{t\scriptsize{|}}q_x = \frac{l_{x+t}-l_{x+t+1}}{l_x} \\ v^{t+1} \rightarrow \text{Ã© utilizado por conta que normalmente a indenizaÃ§Ã£o Ã© paga nÃ£o no momento da morte (t) e sim em t+1} $$ Dados exercÃ­cios seguros individuais e discretos:

```{r dados1}
x = 107
w = 118
n = 2
m = 2
i = 0.05
v <- 1 / (1 + i)
```

## 1.1 Dotal puro de n anos $\boxed{_nE_x}$

Manual ğŸ“:

```{r 1.1}
tpx <- l[x + n + 1] / l[x + 1]
nEx <- (v^n) * (tpx)
nEx
```

Pacote ğŸ’»:

```{r 1.1 pacote}
Exn(tc, x=x, n=n, i=i) # OK
```

<hr class="dotted">

## 1.2 De vida inteira $\boxed{A_x}$

Manual ğŸ“:

```{r 1.2}
t <- 0:(w - x)
t.qx <- (l[x + t + 1] - l[x + t + 1 + 1]) / l[x + 1]
t.qx <- c(t.qx[!is.na(t.qx)], rep(0, 1))
Ax <- sum((v^(t + 1)) * t.qx)
Ax
```

Pacote ğŸ’»:

```{r 1.2 pacote}
Axn(tc, x=x, i=i) # OK
```

<hr class="dotted">

## 1.3 De vida inteira e diferido de m anos $\boxed{_{m\scriptsize{|}}A_x}$

Manual:

```{r 1.3}
t <- m:(w-x-1)
t.qx <- (l[x + t + 1] - l[x + t + 1 + 1]) / l[x + 1]
t.qx <- c(t.qx[!is.na(t.qx)])

total = 0
for (aux in m:(w-x-1)) {
  parcela <- v^(aux+1)*t.qx[aux-m+1]
  print(paste0("O valor da ", aux, "Âª parcela Ã©: ", parcela))
  total = total + parcela
}
print(paste0("O valor total Ã©: ", total))
mAx <- sum((v^(t + 1)) * t.qx)
mAx
```

Pacote ğŸ’»:

```{r 1.3 pacote}
Axn(tc, x=x, i=i, m=m) # OK
```

<hr class="dotted">

## 1.4 TemporÃ¡rio de n anos $\boxed{A^{\small{1}}_{x\ :\ nâƒ§}}$

Manual ğŸ“:

```{r 1.4}
t <- 0:(n-1)
t.qx <- (l[x + t + 1] - l[x + t + 1 + 1]) / l[x + 1]
Axn <- sum((v^(t + 1)) * t.qx)
Axn
```

Pacote ğŸ’»:

```{r 1.4 pacote}
Axn(tc, x=x, i=i, n=n) # OK
```

<hr class="dotted">

## 1.5 TemporÃ¡rio de n anos e diferido de m anos $\boxed{_{m\scriptsize{|}}A^{\small{1}}_{x\ :\ nâƒ§}}$

Manual ğŸ“:

```{r 1.5}
t <- m:(n+m-1)
t.qx <- (l[x + t + 1] - l[x + t + 1 + 1]) / l[x + 1]
Axn <- sum((v^(t + 1)) * t.qx)
Axn
```

Pacote ğŸ’»:

```{r 1.5 pacote}
Axn(tc, x=x, i=i, n=n, m=m) # OK
```

<hr class="dotted">

## 1.6 Dotal misto de n anos $\boxed{A_{x\ :\ nâƒ§}}$

Manual ğŸ“:

```{r 1.6}
t <- 0:(n-1)
t.qx <- (l[x + t + 1] - l[x + t + 1 + 1]) / l[x + 1]
AxnMISTO <- sum((v^(t + 1)) * t.qx)
tpx <- l[x + n + 1] / l[x + 1]
nEx <- (v^n) * (tpx)
AxnMISTO+nEx
```

Pacote ğŸ’»:

```{r 1.6 pacote}
AExn(tc, x=x, i=i, n=n) #OK
```

<hr class="dotted">

## 1.7 Dotal misto de n anos e diferido de m anos $\boxed{_{m\scriptsize{|}}A_{x\ :\ nâƒ§}}$

Manual ğŸ“

```{r 1.7}
t <- m:(n+m-1)
t.qx <- (l[x + t + 1] - l[x + t + 1 + 1]) / l[x + 1]
AxnMISTO <- sum((v^(t + 1)) * t.qx)
tpx <- l[x + n + 1] / l[x + 1]
nEx <- (v^n) * (tpx)
AxnMISTO+nEx
```

Pacote ğŸ’»:

```{r 1.7 pacote}
# NÃ£o hÃ¡ como checar, essa anuidade Ã© apenas para fins didÃ¡ticos
```

<hr class="dotted">

# 2. Seguros individuais e contÃ­nuos

FormulaÃ§Ã£o geral: $$ \bar{A} = \int{v^t \cdot _{t\scriptsize{|}}q_x \ \ \ dt} $$ $$ v^t \rightarrow \ e^{-\delta t}\\ _{t\scriptsize{|}}q_x \rightarrow \  _tp_x \cdot \mu_{x+t}$$ $$ \boxed {\bar{A} = \int{e^{-\delta t}\cdot _tp_x \cdot \mu_{x+t} \ \ \ dt}} $$ Dados utilizados para o cÃ¡lculo dos seguros individuais e contÃ­nuos:

```{r 2.0 dados}
IS = "?"
x = 30
n = 20
m = 10
i = 0.05
v <- 1 / (1 + i)
delta = log(1+i)
```

## 2.1 Dotal puro de n anos $\boxed{_nE_x}$

```{r 2.1}
tpx <- l[x + n + 1] / l[x + 1]
nEx <- (v^n) * (tpx)
nEx
```

<hr class="dotted">

## 2.2 De vida inteira $\boxed{\bar{A}_x}$

```{r 2.2}
t <- 0:(w - x)
tpx <- function(t) l[x + t + 1] / l[x + 1]
uxt <- function(t) (l[x + t - 1 + 1] - l[x + t + 1 + 1]) / (2 * l[x + t + 1])
ft <- function(t) exp(-d * t) * tpx(t) * uxt(t)
integrate(ft, min(t), max(t), subdivisions = 1000)$value
```

<hr class="dotted">

## 2.3 De vida inteira e diferido de m anos $\boxed{_{m\scriptsize{|}}\bar{A}_x}$

```{r 2.3}
t <- m:(w - x - 1)
tpx <- function(t) l[x + t + 1] / l[x + 1]
uxt <- function(t) (l[x + t - 1 + 1] - l[x + t + 1 + 1]) / (2 * l[x + t + 1])
ft <- function(t) exp(-d * t) * tpx(t) * uxt(t)
integrate(ft, min(t), max(t), subdivisions = 1000)$value
```

<hr class="dotted">

## 2.4 TemporÃ¡rio de n anos $\boxed{\bar{A}^{\small{1}}_{x\ :\ nâƒ§}}$

```{r 2.4}
t <- 0:(n - 1)
tpx <- function(t) l[x + t + 1] / l[x + 1]
uxt <- function(t) (l[x + t - 1 + 1] - l[x + t + 1 + 1]) / (2 * l[x + t + 1])
ft <- function(t) exp(-d * t) * tpx(t) * uxt(t)
integrate(ft, min(t), max(t), subdivisions = 1000)$value
```

<hr class="dotted">

## 2.5 TemporÃ¡rio de n anos e diferido de m anos $\boxed{_{m\scriptsize{|}}\bar{A}^{\small{1}}_{x\ :\ nâƒ§}}$

```{r 2.5}
t <- m:(n+m-1)
tpx <- function(t) l[x + t + 1] / l[x + 1]
uxt <- function(t) (l[x + t - 1 + 1] - l[x + t + 1 + 1]) / (2 * l[x + t + 1])
ft <- function(t) exp(-d * t) * tpx(t) * uxt(t)
integrate(ft, min(t), max(t), subdivisions = 1000)$value
```

<hr class="dotted">

## 2.6 Dotal misto de n anos $\boxed{\bar{A}_{x\ :\ nâƒ§}}$

```{r 2.6}
t <- 0:(n-1)
tpx <- function(t) l[x + t + 1] / l[x + 1]
uxt <- function(t) (l[x + t - 1 + 1] - l[x + t + 1 + 1]) / (2 * l[x + t + 1])
ft <- function(t) exp(-d * t) * tpx(t) * uxt(t)
A1xn <- integrate(ft, min(t), max(t), subdivisions = 1000)$value
tpx <- l[x + n + 1] / l[x + 1]
nEx <- (v^n) * (tpx)
A1xn+nEx
```

<hr class="dotted">

## 2.7 Dotal misto de n anos e diferido de m anos $\boxed{_{m\scriptsize{|}}\bar{A}_{x\ :\ nâƒ§}}$

```{r 2.7}
t <- m:(n+m-1)
tpx <- function(t) l[x + t + 1] / l[x + 1]
uxt <- function(t) (l[x + t - 1 + 1] - l[x + t + 1 + 1]) / (2 * l[x + t + 1])
ft <- function(t) exp(-d * t) * tpx(t) * uxt(t)
mA1xn <- integrate(ft, min(t), max(t), subdivisions = 1000)$value
tpx <- l[x + n + m + 1] / l[x + 1]
mnEx <- (v^(n+m)) * (tpx)
mA1xn+mnEx
```

<hr class="dotted">

# 3. Anuidades individuais e discretas

## 3.0 Dados utilizados:

```{r dados 3.0}
i <- 0.04
v <- 1 / (1 + i)
x <- 40 # Relembrando os valores
m <- 30
n <- 20
```

## 3.1 Imediata, vitalÃ­cia e antecipada $\boxed{{a Ìˆ}_{\small{x}}}$

Manual ğŸ“

```{r 3.1 manual}
t <- 0:(w - x)
t.px <- l[x + t + 1] / l[x + 1]
axna <- sum(v^t * t.px)
axna
```

```{r 3.1 pacote}
axn(tc, x = x)
```

<hr class="dotted">

## 3.2 Imediata, vitalÃ­cia e postecipada $\boxed{{a}_{\small{x}}}$

Manual ğŸ“

```{r 3.2 manual}
t <- 1:(w - x)
t.px <- l[x + t + 1] / l[x + 1]
axnb <- sum(v^t * t.px)
axnb
```

Pacote ğŸ’»

```{r 3.2 pacote}
axn(tc, x = x, payment = "arrears")
```

<hr class="dotted">

## 3.3 Diferida, vitalÃ­cia e antecipada $\boxed{_{\small{m}}{\ddot{a}}_{\small{x}}}$

Manual ğŸ“

```{r 3.3 manual}
t <- m:(w - x)
t.px <- l[x + t + 1] / l[x + 1]
axnc <- sum(v^t * t.px)
axnc
```

Pacote ğŸ’»

```{r 3.3 pacote}
axn(tc, x = x, m = m)
```

<hr class="dotted">

## 3.4 Diferida, vitalÃ­cia e postecipada $\boxed{_{\small{m}}{{a}}_{\small{x}}}$

Manual ğŸ“

```{r 3.4 manual}
t <- (m + 1):(w - x)
t.px <- l[x + t + 1] / l[x + 1]
axnd <- sum(v^t * t.px)
axnd
```

Pacote ğŸ’»

```{r 3.4 pacote}
axn(tc, x = x, m = m, payment = "arrears")
```

<hr class="dotted">

## 3.5 Imediata, temporÃ¡ria e antecipada $\boxed{{\ddot{a}}_{\small{x\ :\ nâƒ§}}}$

Manual ğŸ“

```{r 3.5 manual}
t <- 0:(n - 1)
t.px <- l[x + t + 1] / l[x + 1]
axne <- sum(v^t * t.px)
axne

```

Pacote

```{r 3.5 pacote}
axn(tc, x = x, n = n)
```

<hr class="dotted">

## 3.6 Imediata, temporÃ¡rio e postecipada $\boxed{{{a}}_{\small{x\ :\ nâƒ§}}}$

Manual ğŸ“

```{r 3.6 manual}
t <- 1:(n)
t.px <- l[x + t + 1] / l[x + 1]
axne <- sum(v^t * t.px)
axne
```

Pacote ğŸ’»

```{r 3.6 pacote}
axn(tc, x = x, n = n, payment = "arrears")
```

<hr class="dotted">

## 3.7 Diferida, temporÃ¡ria e antecipada $\boxed{{_{\small{m}}\ddot{a}}_{\small{x\ :\ nâƒ§}}}$

Manual ğŸ“

```{r 3.7 manual}
t <- m:(m + n - 1)
t.px <- l[x + t + 1] / l[x + 1]
axne <- sum(v^t * t.px)
axne
```

Pacote ğŸ’»

```{r 3.7 pacote}
axn(tc, x = x, m = m, n = n)
```

<hr class="dotted">

## 3.8 Diferida, temporÃ¡ria e postecipada $\boxed{{_{\small{m}}{a}}_{\small{x\ :\ nâƒ§}}}$

Manual ğŸ“

```{r 3.8 manual}
t <- (m + 1):(m + n - 1)
t.px <- l[x + t + 1] / l[x + 1]
axnh <- sum(v^t * t.px)
axnh
```

Pacote ğŸ’»

```{r 3.8 pacote}
axn(tc, x = x, m = m, n = n, payment = "arrears")
```

<hr class="dotted">

# 4. Anuidades individuais e contÃ­nuas

## 4.0 Dados utilizados:

```{r 4.0 dados}
IS <- 1
i <- 0.04
v <- 1 / (1 + i)
x <- 30 # Relembrando os valores
m <- 20
n <- 20
d <- 0.06
u <- 0.04
w <- 100
```

## 4.1 Imediata e vitalÃ­cia $\boxed{{\bar{a}}_{\small{x}}}$

```{r 4.1}
t <- 0:(w - x)
tpx <- function(t) exp(-u*t)
ft <- function(t) IS*exp(-d * t) * tpx(t)
integrate(ft, min(t), max(t), subdivisions = 1000)$value
```

<hr class="dotted">

## 4.2 Imediata e TemporÃ¡ria $\boxed{{\bar{a}}_{\small{x\ :\ nâƒ§}}}$

```{r 4.2}
t <- 0:(n)
tpx <- function(t) exp(-u*t)
ft <- function(t) IS*exp(-d * t) * tpx(t)
integrate(ft, min(t), max(t), subdivisions = 1000)$value
```

<hr class="dotted">

## 4.3 Diferida e VitalÃ­cia $\boxed{_{\small{m}}{{\bar{a}}}_{\small{x}}}$

```{r 4.3}
t <- m:(w-x)
tpx <- function(t) exp(-u*t)
ft <- function(t) IS*exp(-d * t) * tpx(t)
integrate(ft, min(t), max(t), subdivisions = 1000)$value
```

<hr class="dotted">

## 4.4 Diferida e TemporÃ¡ria $\boxed{_{\small{m}}{{\bar{a}}}_{\small{x\ :\ nâƒ§}}}$

```{r 4.4}
t <- m:(m+n)
tpx <- function(t) exp(-u*t)
ft <- function(t) IS*exp(-d * t) * tpx(t)
integrate(ft, min(t), max(t), subdivisions = 1000)$value
```

<hr class="dotted">

# 5. Seguro para mÃºltiplas vidas

# 5.0 Dados Utilizados

```{r 5.0 Dados Utilizados}
x = 31 # Thiago (coloquei 31 para facilitar os cÃ¡lculos)
y = 26 # Fernanda (Coloquei 26 para facilitar os cÃ¡lculos)
z = 6 # CauÃª (Coloquei 6 para facilitar os cÃ¡lculos)
i = 0.04
v = 1/(1+i)
n = 10
m = 30
w = 119
```

## 5.1.1 Dotal puro de n anos (vida conjunta) $\boxed{_nE_{xy}}$

Manual ğŸ“

```{r 5.1.1 manual}
tpxy <- l[x + n + 1] / l[x + 1] * l[y + n + 1] / l[y + 1]
nExy <- v^n * tpxy
nExy
```

Pacote ğŸ’»

```{r 5.1.1 pacote}
listOfTables = list(tv, tv)
v^n * pxyzt(listOfTables, x = c(x, y), t = n, status = "joint")
```

<hr class="dotted">

## 5.1.2 Dotal puro de n anos (ultimo sobrevivente) $\boxed{_nE_{{\overline{xy}}}}$

Manual ğŸ“

```{r 5.1.2 manual}

```

Pacote ğŸ’»

```{r 5.1.2 pacote}

```

<hr class="dotted">

## 5.2.1 De vida inteira (vida conjunta) $\boxed{A_{xy}}$

Manual ğŸ“

```{r 5.2.1 manual}

t <- 0:(w-x-1)#;t
produto=sum(v^(t+1)*(l[x+t]*l[y+t]-l[x+t+1]*l[y+t+1])/(l[x]*l[y]));produto
```

Pacote ğŸ’»

```{r 5.2.1 pacote}
listOfTables = list(tv, tv)
Axyzn = Axyzn(listOfTables, x=c(30, 25), i= i, status = "joint");
Axyzn
```

<hr class="dotted">

## 5.2.2 De vida inteira (Ãºltimo sobrevivente) $\boxed{A_{\overline{xy}}}$

Manual ğŸ“

```{r 5.2.2 manual}
total = 0
for (aux in 0:(w-y)) {
  if (!is.na(l[x+aux]/l[x])) {
  p1 <- l[x+aux]/l[x]
} else {
  p1 <- 0
}
  if (!is.na(l[y+aux]/l[y])) {
  p2 <- l[y+aux]/l[y]
} else {
  p2 <- 0
}
  if (!is.na(l[x+aux+1]/l[x])) {
  p3 <- l[x+aux+1]/l[x]
} else {
  p3 <- 0
}
  if (!is.na(l[y+aux+1]/l[y])) {
  p4 <- l[y+aux+1]/l[y]
} else {
  p4 <- 0
}
  parcela <- v^(aux+1)*((p1+p2-p1*p2)-(p3+p4-p3*p4));
  #print(paste0("O valor da ", aux, " parcela Ã©: ", parcela))
  total = total + parcela
}
produto = total
print(paste0("O valor total Ã©: ", total))
```

Pacote ğŸ’»

```{r 5.2.2 pacote}
listOfTables = list(tv, tv)
Axyzn = Axyzn(listOfTables, x=c(30, 25), i= 0.04,status = "last");
Axyzn
```

<hr class="dotted">

## 5.3.1 De vida inteira e diferido de m anos $\boxed{_{m\scriptsize{|}}A_{xy}}$

Manual ğŸ“

```{r 5.3.1 manual}

t <- m:(w-x-1)#;t
produto=sum(v^(t+1)*(l[x+t]*l[y+t]-l[x+t+1]*l[y+t+1])/(l[x]*l[y]));produto
```

Pacote ğŸ’»

```{r 5.3.1 pacote}
listOfTables = list(tv, tv)
Axyzn = Axyzn(listOfTables, x=c(30, 25), i= 0.04, m = m, status = "joint");
Axyzn
```

<hr class="dotted">

## 5.3.2 De vida inteira e diferido de m anos $\boxed{_{m\scriptsize{|}}A_{\overline{xy}}}$

Manual ğŸ“ Pacote ğŸ’»

<hr class="dotted">

## 5.4.1 TemporÃ¡rio de n anos $\boxed{A^{\small{1}}_{{xy}\ :\ nâƒ§}}$

Manual ğŸ“ Pacote ğŸ’»

<hr class="dotted">

## 5.4.2 TemporÃ¡rio de n anos $\boxed{A^{\small{1}}_{{\overline{xy}}\ :\ nâƒ§}}$

Manual ğŸ“ Pacote ğŸ’»

<hr class="dotted">

## 5.5.1 TemporÃ¡rio de n anos e diferido de m anos $\boxed{_{m\scriptsize{|}}A^{\small{1}}_{{xy}\ :\ nâƒ§}}$

Manual ğŸ“ Pacote ğŸ’»

<hr class="dotted">

## 5.5.2 TemporÃ¡rio de n anos e diferido de m anos $\boxed{_{m\scriptsize{|}}A^{\small{1}}_{{\overline{xy}}\ :\ nâƒ§}}$

Manual ğŸ“ Pacote ğŸ’»

<hr class="dotted">

## 5.6.1 Dotal misto de n anos $\boxed{A_{{xy}\ :\ nâƒ§}}$

Manual ğŸ“ Pacote ğŸ’»

<hr class="dotted">

## 5.6.2 Dotal misto de n anos $\boxed{A_{{\overline{xy}}\ :\ nâƒ§}}$

Manual ğŸ“ Pacote ğŸ’»

<hr class="dotted">

## 5.7.1 Dotal misto de n anos e diferido de m anos $\boxed{_{m\scriptsize{|}}A_{{xy}\ :\ nâƒ§}}$

Manual ğŸ“ Pacote ğŸ’»

<hr class="dotted">

## 5.7.2 Dotal misto de n anos e diferido de m anos $\boxed{_{m\scriptsize{|}}A_{{\overline{xy}}\ :\ nâƒ§}}$

Manual ğŸ“ Pacote ğŸ’»

<hr class="dotted">

# 6. Anuidades para mÃºltiplas vidas

# 7. Anuidades reversÃ­veis

$a_{x|y}\rightarrow \text{caso x faleÃ§a, a renda Ã© revertida para y}$ morte de x -\> inicio da reversÃ£o morte de y -\> fim da reversÃ£o

## 7.0 Dados utilizados:

```{r 7.0 dados}

```

## 7.1 $\boxed{_nE_{xy}}$

# 4. Regimes Financeiros

<p class="justify">

Os regimes financeiros referem-se Ã  forma como as contribuiÃ§Ãµes sÃ£o acumuladas e como os benefÃ­cios sÃ£o pagos ao longo do tempo. Existem trÃªs principais regimes financeiros:

</p>

<img src="../imgs/regimes_financeiros2.png" alt="Regimes Financeiros"/>

## Regime de RepartiÃ§Ã£o Simples (PAYG - Pay-As-You-Go)

<p class="justify">

Neste regime as contribuiÃ§Ãµes dos participantes ativos sÃ£o usadas para pagar os benefÃ­cios dos aposentados atuais, sem acumulaÃ§Ã£o de fundos, de modo que as receitas e despesas devem se equilibrar anualmente. Este regime Ã© comum em sistemas pÃºblicos de previdÃªncia social.

</p>

## Regime de CapitalizaÃ§Ã£o

<p class="justify">

Neste regime as contribuiÃ§Ãµes dos participantes sÃ£o acumuladas e investidas para gerar um fundo que serÃ¡ usado para pagar os benefÃ­cios futuros, acumulando reservas financeiras ao longo do tempo, sendo tÃ­pico em planos de previdÃªncia privada.

</p>

## Regime de RepartiÃ§Ã£o de Capitais de Cobertura

<p class="justify">

Esse regime combina caracterÃ­sticas dos regimes de repartiÃ§Ã£o simples e capitalizaÃ§Ã£o, acumulando um fundo para garantir a solvÃªncia a curto e mÃ©dio prazo, mas nÃ£o necessariamente para a totalidade dos benefÃ­cios futuros

</p>

# ReferÃªncias

-   BOWERS, N. L. et al. Actuarial mathematics. The Society of Actuaries, 1997.
-   CORDEIRO FILHO, Antonio. CÃ¡lculo Atuarial Aplicado. 2. ed. SÃ£o Paulo: Atlas, 2014
-   FinancialandActuarialMathematicsforLifeContingencies [[PDF](https://cran.r-project.org/web/packages/lifecontingencies/lifecontingencies.pdf)].
-   Fernanda Peres: Rmarkdown. [Canal do Youtube](https://www.youtube.com/c/FernandaPeres).

<!-- ```{js, echo=FALSE} -->
<!-- (function() { -->
<!--   var codes = document.querySelectorAll('pre:not([class])'); -->
<!--   var code, i, d, s, p; -->
<!--   for (i = 0; i < codes.length; i++) { -->
<!--     code = codes[i]; -->
<!--     p = code.parentNode; -->
<!--     d = document.createElement('details'); -->
<!--     s = document.createElement('summary'); -->
<!--     s.innerText = 'Details'; -->
<!--     // <details><summary>Details</summary></details> -->
<!--     d.appendChild(s); -->
<!--     // move the code into <details> -->
<!--     p.replaceChild(d, code); -->
<!--     d.appendChild(code); -->
<!--   } -->
<!-- })(); -->
<!-- ``` -->
